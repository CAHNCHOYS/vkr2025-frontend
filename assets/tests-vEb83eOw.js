import{v as m,j as r,l as p}from"./index-D9qwnhKR.js";import{t as u}from"./testService-Cx1z-Dyy.js";const k=m("testStore",()=>{const h=r(""),T=r(""),a=r(!1),c=r(!1),l=r(!1),i=r(!1),v=r(!1),d=r([]),n=r([]),f=r(0),w=p(()=>[...n.value].sort((t,e)=>t.orderInTest-e.orderInTest));return{isActionLoading:a,isTestsLoadError:v,isActionError:l,isActionSuccess:c,isTestsLoading:i,createdTestName:h,editingTestName:T,creatingTestId:f,teacherTests:d,testQuestions:n,getSortedTestQuestions:w,addNewTest:async(t,e,s)=>{try{a.value=!0;const{id:o}=await u.createTest(t,e,s);f.value=o,d.value.push({id:o,subjectId:s,name:t})}catch(o){console.log(o)}a.value=!1},addNewQuestion:async t=>{try{a.value=!0;const{id:e}=await u.addQuestion(t);n.value.push({id:e,text:t.text,type:t.type,rightAnswer:t.rightAnswer,answers:t.answers,weight:t.weight,orderInTest:t.order}),c.value=!0}catch(e){console.log(e),l.value=!0,setTimeout(()=>l.value=!1,3e3)}a.value=!1,setTimeout(()=>c.value=!1,3e3)},loadAllTeacherTests:async t=>{try{i.value=!0;const e=await u.getTeacherTests(t);d.value=e}catch{v.value=!0}i.value=!1},deleteTeacherTest:async t=>{try{a.value=!0,await u.deleteTeacherTest(t),d.value=d.value.filter(e=>e.id!=t)}catch(e){console.log(e)}a.value=!1},loadSingleTest:async t=>{try{i.value=!0;const{questions:e,testName:s}=await u.loadTestQuestions(t);n.value=e,T.value=s}catch{v.value=!0}i.value=!1},updateQuestionOrder:async(t,e)=>{try{a.value=!0,await u.updateQuestionOrder(t,e)}catch{l.value=!0,setTimeout(()=>l.value=!1,3e3)}a.value=!1},updateTestname:async(t,e)=>{try{a.value=!0,await u.updateTestName(t,e),c.value=!0}catch{l.value=!0,setTimeout(()=>l.value=!1,3e3)}a.value=!1,setTimeout(()=>c.value=!1,3e3)},addTestResult:async(t,e,s,o)=>{try{await u.addResult(t,e,s,o)}catch(g){console.log(g)}},deleteTestQuestion:async t=>{try{await u.deleteQuestion(t),n.value=n.value.filter(e=>e.id!=t)}catch{}},updateTestQuestion:async(t,e)=>{try{a.value=!0,await u.updateTestQuestion(t,e);let s=n.value.find(o=>o.id===t);s.text=e.text,s.answers=e.answers,s.weight=e.weight,s.rightAnswer=e.rightAnswer,c.value=!0}catch{l.value=!0,setTimeout(()=>l.value=!1,3e3)}a.value=!1,setTimeout(()=>c.value=!1,3e3)}}});export{k as u};
