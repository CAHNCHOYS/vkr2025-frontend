import{d as D,j as d,c as E,e as l,a as w,w as t,r as n,f as C,k as N,t as L,g as _,b as s,q as M,y as I,z as P,i as g,A as $,_ as h}from"./index-AS5MfRMp.js";import{u as G,_ as H}from"./useFormValidation-Db8C8qcV.js";const J={class:"d-flex top justify-center align-center h-screen overflow-auto"},K={class:"text-h6"},O=D({__name:"RegisterView",setup(Q){const p=d(!1),o=d({firstName:"",secondName:"",thirdName:"",category:"доцент",email:"",password:""}),c=d(!1),b=d(!1),k=d(""),V=d(!1),{form:v,minLength:i,email:T,required:u}=G(),R=P(),U=async()=>{var x;if(v.value){try{V.value=!0,await $.register(o.value),c.value=!0,setTimeout(()=>c.value=!1,2500),setTimeout(()=>R.push({name:"login"}),3050)}catch(e){const m=e;console.log(m),k.value=((x=m.response)==null?void 0:x.data.error)||"Произошла ошибка при регистрации повторите попытку позже!",b.value=!0,setTimeout(()=>b.value=!1,2500)}V.value=!1}};return(x,e)=>{const m=n("VAlert"),S=n("VScaleTransition"),A=n("VCardTitle"),f=n("VTextField"),r=n("VCol"),B=n("VSelect"),y=n("VBtn"),F=n("VRow"),z=n("VForm"),j=n("VCardActions"),q=n("VCard");return g(),E("div",J,[l(S,null,{default:t(()=>[c.value?(g(),C(m,{key:0,type:"success",variant:"flat",class:"top-0 card left-0",position:"fixed","max-width":"380",style:{"z-index":"999"}},{default:t(()=>e[8]||(e[8]=[w("p",{class:"text-h6"},"Регистрация прошла успешно, можете перейти к авторизации!",-1)])),_:1})):N("",!0)]),_:1}),l(S,null,{default:t(()=>[b.value?(g(),C(m,{key:0,type:"error",variant:"flat",class:"top-0 card left-0",position:"fixed","max-width":"380",style:{"z-index":"999"}},{default:t(()=>[w("p",K,L(k.value),1)]),_:1})):N("",!0)]),_:1}),l(q,{"max-width":"600",class:"pa-8 flex-grow-1 rounded-0 card",variant:"flat",elevation:"15"},{default:t(()=>[l(A,{class:"text-h4 text-center font-weight-bold px-0 py-0 text-wrap mb-5"},{default:t(()=>e[9]||(e[9]=[_(" Регистрация ")])),_:1}),l(j,null,{default:t(()=>[l(z,{onSubmit:M(U,["prevent"]),modelValue:s(v),"onUpdate:modelValue":e[7]||(e[7]=a=>I(v)?v.value=a:null)},{default:t(()=>[l(F,{"no-gutters":""},{default:t(()=>[l(r,{cols:"12",class:"mb-4"},{default:t(()=>[l(f,{label:"Фамилия",modelValue:o.value.secondName,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.secondName=a),rules:[s(u),s(i)]},null,8,["modelValue","rules"])]),_:1}),l(r,{cols:"12",class:"mb-4"},{default:t(()=>[l(f,{label:"Имя",modelValue:o.value.firstName,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.firstName=a),rules:[s(u),s(i)]},null,8,["modelValue","rules"])]),_:1}),l(r,{cols:"12",class:"mb-4"},{default:t(()=>[l(f,{label:"Отчество",modelValue:o.value.thirdName,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.thirdName=a),rules:[s(u),s(i)]},null,8,["modelValue","rules"])]),_:1}),l(r,{cols:"12",class:"mb-4"},{default:t(()=>[l(B,{label:"Звание",variant:"outlined","hide-details":"",items:["ассистент","доцент","старший преподаватель","профессор"],modelValue:o.value.category,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.category=a),rules:[s(u)]},null,8,["modelValue","rules"])]),_:1}),l(r,{cols:"12",class:"mb-4"},{default:t(()=>[l(f,{label:"Почта",modelValue:o.value.email,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.email=a),rules:[s(u),s(i),s(T)]},null,8,["modelValue","rules"])]),_:1}),l(r,{cols:"12",class:"mb-4"},{default:t(()=>[l(f,{label:"Пароль",modelValue:o.value.password,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.password=a),type:p.value?"text":"password","append-icon":p.value?"mdi-eye":"mdi-eye-off","onClick:append":e[6]||(e[6]=a=>p.value=!p.value),rules:[s(u),s(i)]},null,8,["modelValue","type","append-icon","rules"])]),_:1}),l(r,{cols:"12",class:"mb-2"},{default:t(()=>[l(y,{color:"green",variant:"flat",block:"",height:"50",type:"submit",loading:V.value,disabled:V.value},{default:t(()=>e[10]||(e[10]=[_("Зарегистрироваться")])),_:1},8,["loading","disabled"])]),_:1}),l(r,{cols:"12"},{default:t(()=>[l(y,{color:"red",variant:"flat",block:"",height:"50",type:"reset"},{default:t(()=>e[11]||(e[11]=[_("Сбросить")])),_:1})]),_:1}),c.value?(g(),C(r,{key:0,cols:"12"},{default:t(()=>[l(y,{to:"/login",color:"orange",variant:"flat",block:"",height:"50"},{default:t(()=>e[12]||(e[12]=[_("К странице авторизации")])),_:1})]),_:1})):N("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e[13]||(e[13]=w("img",{class:"bg",src:H,alt:"Фоновая картинка"},null,-1))])}}}),Y=h(O,[["__scopeId","data-v-5aea2347"]]);export{Y as default};
