import{d as x,j as m,c as j,F as V,a as A,e as s,r as n,w as t,g as f,i as u,f as p,u as I,o as U,b as i,k}from"./index-BCLyBTkh.js";import{u as F}from"./subjects-KNhEtZ79.js";import{u as M}from"./tests-Dfe5oX2x.js";import{_ as q}from"./CreateQuestions.vue_vue_type_script_setup_true_lang-BBi3w8gl.js";import"./testService-ficxW-TY.js";const z=x({__name:"SelectSubject",props:{subjects:{}},emits:["selectSubject"],setup(y,{emit:b}){const e=m(y.subjects[0].id);return(c,o)=>{const l=n("v-select"),_=n("v-btn");return u(),j(V,null,[o[3]||(o[3]=A("h3",{class:"text-h5 mb-8"},"Выберете предмет для создания теста",-1)),s(l,{items:c.subjects,modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=d=>e.value=d),"item-title":"name","item-value":"id",label:"Ваши предметы","no-data-text":"Нет предметов",variant:"outlined","auto-select-first":"",class:"mb-4"},null,8,["items","modelValue"]),s(_,{onClick:o[1]||(o[1]=d=>c.$emit("selectSubject",e.value)),color:"green"},{default:t(()=>o[2]||(o[2]=[f("Продолжить")])),_:1})],64)}}}),D=x({__name:"EnterName",props:{isTestAdding:{type:Boolean}},emits:["enterTestName"],setup(y,{emit:b}){const r=b,e=m(""),c=()=>{r("enterTestName",e.value)};return(o,l)=>{const _=n("v-text-field"),d=n("v-col"),g=n("v-btn"),N=n("v-row");return u(),p(N,null,{default:t(()=>[s(d,{cols:"12"},{default:t(()=>[s(_,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=T=>e.value=T),placeholder:"Введите название теста"},null,8,["modelValue"])]),_:1}),s(d,{cols:"12"},{default:t(()=>[s(g,{onClick:c,color:"green",loading:o.isTestAdding},{default:t(()=>l[1]||(l[1]=[f("Продолжить")])),_:1},8,["loading"])]),_:1})]),_:1})}}}),G={key:0},H={key:1},W=x({__name:"CreateTestView",setup(y){const b=I(),r=F(),e=M(),c=m(!1),o=m(0),l=m(!1),_=m(""),d=m("text"),g=m(1),N=v=>{o.value=v,c.value=!0},T=async v=>{v.length<3||(_.value=v,await e.addNewTest(_.value,b.currentTeacher.id,o.value),l.value=!0)},C=async v=>{await e.addNewQuestion({...v,order:g.value,type:d.value,testId:e.creatingTestId}),g.value++};return U(async()=>{r.teacherSubjects.length||await r.loadAllSubjects(b.currentTeacher.id)}),(v,a)=>{const E=n("v-col"),B=n("v-row"),L=n("v-progress-linear"),S=n("v-alert"),Q=n("v-card-text"),$=n("v-card"),w=n("v-snackbar");return u(),j(V,null,[s(B,{align:"center",class:"mb-6"},{default:t(()=>[s(E,{cols:"auto"},{default:t(()=>a[1]||(a[1]=[A("h3",{class:"text-h3 font-weight-bold"},"Создание теста",-1)])),_:1})]),_:1}),s($,{elevation:"8",class:"pa-8"},{default:t(()=>[s(Q,null,{default:t(()=>[i(r).isActionLoading?(u(),j("div",G,[s(L,{indeterminate:"",height:"10",color:"indigo"})])):(u(),j("div",H,[!c.value&&i(r).teacherSubjects.length?(u(),p(z,{key:0,subjects:i(r).teacherSubjects,onSelectSubject:N},null,8,["subjects"])):!c.value&&!i(r).isSubjectLoadError?(u(),p(S,{key:1,type:"info",class:"text-h6"},{default:t(()=>a[2]||(a[2]=[f("У вас пока нет созданных предметов, создайте хотя бы один для создания теста!")])),_:1})):i(r).isSubjectLoadError?(u(),p(S,{key:2,type:"error",class:"text-h6"},{default:t(()=>a[3]||(a[3]=[f(" Ошибка при загрузке предметов, пожалуйста, обновите страницу! ")])),_:1})):k("",!0)])),!l.value&&c.value?(u(),p(D,{key:2,onEnterTestName:T,"is-test-adding":i(e).isActionLoading},null,8,["is-test-adding"])):k("",!0),l.value?(u(),p(q,{key:3,"is-loading":i(e).isActionLoading,"is-test-name-entered":l.value,onUpdateQustionType:a[0]||(a[0]=h=>d.value=h),onCreateQuestion:C},null,8,["is-loading","is-test-name-entered"])):k("",!0)]),_:1})]),_:1}),s(w,{"model-value":i(e).isActionError,vertical:""},{default:t(()=>[s(S,{type:"error",class:"text-h6"},{default:t(()=>a[4]||(a[4]=[f(" Ошибка при добавлении вопроса ")])),_:1})]),_:1},8,["model-value"]),s(w,{"model-value":i(e).isActionSuccess,vertical:"",color:"green"},{default:t(()=>[s(S,{type:"success",class:"text-h6"},{default:t(()=>a[5]||(a[5]=[f(" Вопрос добавлен ! ")])),_:1})]),_:1},8,["model-value"])],64)}}});export{W as default};
