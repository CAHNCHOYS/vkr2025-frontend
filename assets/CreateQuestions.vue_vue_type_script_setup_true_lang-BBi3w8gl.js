import{j as C,d as B,f as D,r as l,q as T,w as o,e as s,b as i,g as S,t as U,i as _,s as q,p as P,m as G,a as E,c as F,k as $,F as j,h as z}from"./index-BCLyBTkh.js";function I(){const w=C({text:"",weight:0,rightAnswer:"",answers:""}),g=C(0),e=C([]),f=C(0);return{formData:w,currentAnswerNumber:g,currentAnswers:e,selectedAnswerId:f,addAnswer:()=>{g.value++,e.value.push({id:g.value,text:"",isRight:!1})},deleteAnswer:r=>{e.value=e.value.filter(c=>c.id!=r),g.value--},updateQuestionAnswers:(r,c,A)=>{e.value=e.value.map(y=>y.id===A?{id:A,isRight:c,text:r}:y)},submitQuestionAnswers:()=>{let r="";e.value.forEach(c=>{r+=c.text+"|"}),r=r.slice(0,-1),w.value.answers=r},resetQuestionCreation:()=>{w.value.answers="",w.value.rightAnswer="",w.value.text="",w.value.weight=0,e.value=[],g.value=0}}}const H=B({__name:"EnterText",props:{editFormData:{},isEditable:{type:Boolean}},emits:["addQuestion"],setup(w,{emit:g}){const e=w,f=g,{formData:t,resetQuestionCreation:n}=I();e.editFormData&&(t.value.text=e.editFormData.text,t.value.answers=e.editFormData.answers,t.value.weight=e.editFormData.weight,t.value.rightAnswer=e.editFormData.rightAnswer);const m=()=>{f("addQuestion",t.value),e.isEditable||n()};return(b,u)=>{const r=l("v-textarea"),c=l("v-col"),A=l("v-text-field"),y=l("v-btn"),k=l("v-row"),v=l("v-form");return _(),D(v,{onSubmit:T(m,["prevent"])},{default:o(()=>[s(k,{"no-gutters":""},{default:o(()=>[s(c,{cols:"12",class:"mb-4"},{default:o(()=>[s(r,{modelValue:i(t).text,"onUpdate:modelValue":u[0]||(u[0]=a=>i(t).text=a),variant:"outlined",label:"Введите текст вопроса"},null,8,["modelValue"])]),_:1}),s(c,{cols:"12",class:"mb-4"},{default:o(()=>[s(A,{modelValue:i(t).rightAnswer,"onUpdate:modelValue":u[1]||(u[1]=a=>i(t).rightAnswer=a),label:"Введите ответ на вопрос"},null,8,["modelValue"])]),_:1}),s(c,{cols:"12",class:"mb-4"},{default:o(()=>[s(A,{modelValue:i(t).weight,"onUpdate:modelValue":u[2]||(u[2]=a=>i(t).weight=a),label:"Количество баллов за правильный ответ",type:"number"},null,8,["modelValue"])]),_:1}),s(c,{cols:"12"},{default:o(()=>[s(y,{type:"submit",color:"green"},{default:o(()=>[S(U(b.isEditable?"Обновить вопрос":"Создать вопрос"),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),L=B({__name:"EnterSingle",props:{id:{},selectedId:{},text:{},isSelected:{type:Boolean}},emits:["updateAnswer","deleteAnswer"],setup(w,{emit:g}){const e=w,f=g,t=C(e.text||""),n=C(e.isSelected||!1),m=()=>{f("updateAnswer",t.value,n.value,e.id)};return q(()=>e.selectedId,()=>{e.selectedId===e.id?n.value=!0:n.value=!1}),(b,u)=>{const r=l("v-text-field"),c=l("v-col"),A=l("v-checkbox"),y=l("v-tooltip"),k=l("v-btn"),v=l("v-row");return _(),D(v,{align:"center","no-gutters":"",class:P(["mb-2 pa-2",n.value?"bg-grey-lighten-4":""])},{default:o(()=>[s(c,{cols:"10"},{default:o(()=>[s(r,{modelValue:t.value,"onUpdate:modelValue":[u[0]||(u[0]=a=>t.value=a),m],modelModifiers:{lazy:!0},variant:"underlined",label:"Текст ответа"},null,8,["modelValue"])]),_:1}),s(c,{class:"d-flex justify-center",cols:"1"},{default:o(()=>[s(y,{text:"Сделать правильным","content-class":"bg-green text-white",location:"bottom center"},{activator:o(({props:a})=>[s(A,G({modelValue:n.value,"onUpdate:modelValue":[u[1]||(u[1]=d=>n.value=d),m]},a,{color:"green"}),null,16,["modelValue"])]),_:1})]),_:1}),s(c,{class:"d-flex justify-center",cols:"1"},{default:o(()=>[s(k,{onClick:u[2]||(u[2]=a=>b.$emit("deleteAnswer",b.id)),icon:"mdi-trash-can",color:"red"})]),_:1})]),_:1},8,["class"])}}}),J={class:"d-flex justify-space-between align-center mb-4"},K={key:0},O=B({__name:"SingleAnswer",props:{editFormData:{},isEditable:{type:Boolean}},emits:["addQuestion"],setup(w,{emit:g}){const e=w,f=g,{formData:t,currentAnswers:n,selectedAnswerId:m,currentAnswerNumber:b,addAnswer:u,deleteAnswer:r,updateQuestionAnswers:c,submitQuestionAnswers:A,resetQuestionCreation:y}=I();if(e.editFormData){t.value.text=e.editFormData.text,t.value.answers=e.editFormData.answers,t.value.weight=e.editFormData.weight,t.value.rightAnswer=e.editFormData.rightAnswer;const d=e.editFormData.answers.split("|"),p=e.editFormData.rightAnswer;b.value=d.length,d.forEach((x,h)=>{n.value.push({id:h+1,text:x,isRight:x===p})})}const k=(d,p,x)=>{p?(n.value=n.value.map(h=>(h.isRight=!1,h)),m.value=x,t.value.rightAnswer=d):x===m.value&&(m.value=0),c(d,p,x)},v=d=>{(m.value=d)&&(m.value=0),r(d)},a=()=>{n.value.some(d=>d.isRight)&&(A(),f("addQuestion",t.value),e.isEditable||y())};return(d,p)=>{const x=l("v-textarea"),h=l("v-col"),R=l("v-btn"),N=l("v-text-field"),V=l("v-row"),M=l("v-form");return _(),D(M,{onSubmit:T(a,["prevent"])},{default:o(()=>[s(V,{"no-gutters":""},{default:o(()=>[s(h,{cols:"12",class:"mb-4"},{default:o(()=>[s(x,{modelValue:i(t).text,"onUpdate:modelValue":p[0]||(p[0]=Q=>i(t).text=Q),variant:"outlined",label:"Введите текст вопроса","hide-details":""},null,8,["modelValue"])]),_:1}),s(h,{cols:"12",class:"mb-4"},{default:o(()=>[E("div",J,[p[2]||(p[2]=E("h4",{class:"mb-2 text-h6 pr-2"},"Добавьте ответы и выберете один правильный",-1)),s(R,{icon:"mdi-plus",color:"green",onClick:i(u)},null,8,["onClick"])]),i(b)?(_(),F("div",K,[(_(!0),F(j,null,z(i(n),Q=>(_(),D(L,{key:Q.id,id:Q.id,text:Q.text,"selected-id":i(m),"is-selected":Q.isRight,onUpdateAnswer:k,onDeleteAnswer:v},null,8,["id","text","selected-id","is-selected"]))),128))])):$("",!0)]),_:1}),s(h,{cols:"12",class:"mb-4"},{default:o(()=>[s(N,{modelValue:i(t).weight,"onUpdate:modelValue":p[1]||(p[1]=Q=>i(t).weight=Q),label:"Количество баллов за правильный ответ",type:"number"},null,8,["modelValue"])]),_:1}),s(h,{cols:"12"},{default:o(()=>[s(R,{type:"submit",color:"green"},{default:o(()=>[S(U(d.isEditable?"Обновить вопрос":"Создать вопрос"),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),W={class:"d-flex justify-space-between align-center mb-4"},X={key:0},Y=B({__name:"MultiplyAnswer",props:{editFormData:{},isEditable:{type:Boolean}},emits:["addQuestion"],setup(w,{emit:g}){const e=w,f=g,{formData:t,currentAnswers:n,selectedAnswerId:m,currentAnswerNumber:b,addAnswer:u,deleteAnswer:r,updateQuestionAnswers:c,submitQuestionAnswers:A,resetQuestionCreation:y}=I();if(e.editFormData){t.value.text=e.editFormData.text,t.value.answers=e.editFormData.answers,t.value.weight=e.editFormData.weight,t.value.rightAnswer=e.editFormData.rightAnswer;const v=e.editFormData.answers.split("|"),a=e.editFormData.rightAnswer.split("|");b.value=v.length,v.forEach((d,p)=>{n.value.push({id:p+1,text:d,isRight:a.includes(d)})})}const k=()=>{if(!n.value.some(a=>a.isRight))return;A();let v="";n.value.forEach(a=>a.isRight?v+=a.text+"|":v=v),v=v.slice(0,-1),t.value.rightAnswer=v,f("addQuestion",t.value),e.isEditable||y()};return(v,a)=>{const d=l("v-textarea"),p=l("v-col"),x=l("v-btn"),h=l("v-text-field"),R=l("v-row"),N=l("v-form");return _(),D(N,{onSubmit:T(k,["prevent"])},{default:o(()=>[s(R,{"no-gutters":""},{default:o(()=>[s(p,{cols:"12",class:"mb-4"},{default:o(()=>[s(d,{modelValue:i(t).text,"onUpdate:modelValue":a[0]||(a[0]=V=>i(t).text=V),variant:"outlined",label:"Введите текст вопроса","hide-details":""},null,8,["modelValue"])]),_:1}),s(p,{cols:"12",class:"mb-4"},{default:o(()=>[E("div",W,[a[2]||(a[2]=E("h4",{class:"mb-2 text-h6 pr-2"},"Добавьте ответы и выберете правильные",-1)),s(x,{icon:"mdi-plus",color:"green",onClick:i(u)},null,8,["onClick"])]),i(b)?(_(),F("div",X,[(_(!0),F(j,null,z(i(n),V=>(_(),D(L,{key:V.id,id:V.id,text:V.text,"selected-id":i(m),"is-selected":V.isRight,onUpdateAnswer:i(c),onDeleteAnswer:i(r)},null,8,["id","text","selected-id","is-selected","onUpdateAnswer","onDeleteAnswer"]))),128))])):$("",!0)]),_:1}),s(p,{cols:"12",class:"mb-4"},{default:o(()=>[s(h,{modelValue:i(t).weight,"onUpdate:modelValue":a[1]||(a[1]=V=>i(t).weight=V),label:"Количество баллов за правильный ответ",type:"number"},null,8,["modelValue"])]),_:1}),s(p,{cols:"12"},{default:o(()=>[s(x,{type:"submit",color:"green"},{default:o(()=>[S(U(v.isEditable?"Обновить вопрос":"Создать вопрос"),1)]),_:1})]),_:1}),S(" "+U(v.editFormData)+" ",1),E("p",null,U(i(n)),1),E("p",null,U(i(t)),1)]),_:1})]),_:1})}}}),Z={key:0,elevation:"6",class:"pa-4"},ee={key:0,class:"d-flex justify-center"},te={key:1},ne=B({__name:"CreateQuestions",props:{isLoading:{type:Boolean},isTestNameEntered:{type:Boolean}},emits:["createQuestion","updateQustionType"],setup(w,{emit:g}){const e=g,f=C("text");return(t,n)=>{const m=l("v-radio"),b=l("v-radio-group"),u=l("v-progress-circular");return _(),F(j,null,[n[5]||(n[5]=E("h3",{class:"text-h6 mb-4"},"Выберете вид вопроса для добавления",-1)),s(b,{modelValue:f.value,"onUpdate:modelValue":[n[0]||(n[0]=r=>f.value=r),n[1]||(n[1]=r=>e("updateQustionType",f.value))],inline:"",class:"mb-5"},{default:o(()=>[s(m,{label:"Текстовый ввод ответа",value:"text"}),s(m,{label:"Несколько правильных ответов",value:"multiply"}),s(m,{label:"Один правильный ответ",value:"single"})]),_:1},8,["modelValue"]),t.isTestNameEntered?(_(),F("div",Z,[t.isLoading?(_(),F("div",ee,[s(u,{indeterminate:"",color:"red",size:"64"})])):(_(),F("div",te,[f.value=="text"?(_(),D(H,{key:0,"is-editable":!1,onAddQuestion:n[2]||(n[2]=r=>e("createQuestion",r))})):$("",!0),f.value=="single"?(_(),D(O,{key:1,"is-editable":!1,onAddQuestion:n[3]||(n[3]=r=>e("createQuestion",r))})):$("",!0),f.value==="multiply"?(_(),D(Y,{key:2,"is-editable":!1,onAddQuestion:n[4]||(n[4]=r=>e("createQuestion",r))})):$("",!0)]))])):$("",!0)],64)}}});export{ne as _,H as a,Y as b,O as c};
