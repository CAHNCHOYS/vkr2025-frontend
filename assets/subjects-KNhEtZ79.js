import{x as i,v as j,j as l}from"./index-BCLyBTkh.js";class v{async addTeacherSubject(a,e){const{data:u}=await i.post("/subjects",{subjectName:a,teacherId:e});return u}async loadAllTeacherSubjects(a){const{data:e}=await i.get("/subjects/"+a);return e}async deleteTeacherSubject(a){const{data:e}=await i.delete("/subjects/"+a);return e}}const d=new v,A=j("subjectStore",()=>{const s=l(!1),a=l(!1),e=l(!1),u=l(""),S=l(!1),n=l([]);return{teacherSubjects:n,isActionLoading:s,isActionSuccess:a,isSubjectActionError:e,isSubjectLoadError:S,subjectActionErrorMessage:u,addSubject:async(c,t)=>{var r;try{s.value=!0;const{id:o}=await d.addTeacherSubject(t,c);n.value.push({id:o,name:t}),a.value=!0,setTimeout(()=>a.value=!1,2e3)}catch(o){const b=o;console.log(b),u.value=((r=b.response)==null?void 0:r.data.error)||"Произошла ошибка при добавлении, повторите попытку позже!",e.value=!0,setTimeout(()=>e.value=!1,2e3)}finally{s.value=!1}},loadAllSubjects:async c=>{try{s.value=!0;const{subjects:t}=await d.loadAllTeacherSubjects(c);console.log(t),n.value=t}catch(t){S.value=!0,console.log(t)}finally{s.value=!1}},deleteSubject:async c=>{var t;try{await d.deleteTeacherSubject(c),n.value=n.value.filter(r=>r.id!=c)}catch(r){const o=r;console.log(o),u.value=((t=o.response)==null?void 0:t.data.error)||"Произошла ошибка при удалении предмета, повторите попытку позже!",e.value=!0,setTimeout(()=>e.value=!1,3e3)}}}});export{A as u};
