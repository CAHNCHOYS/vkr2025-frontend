import{j as C,d as $,f as D,r as l,q as S,w as o,e as s,b as r,g as N,t as T,i as _,s as q,p as P,m as G,a as U,c as F,k as E,F as j,h as z}from"./index-CvDodZGt.js";function I(){const w=C({text:"",weight:0,rightAnswer:"",answers:""}),g=C(0),e=C([]),f=C(0);return{formData:w,currentAnswerNumber:g,currentAnswers:e,selectedAnswerId:f,addAnswer:()=>{g.value++,e.value.push({id:g.value,text:"",isRight:!1})},deleteAnswer:i=>{e.value=e.value.filter(c=>c.id!=i),g.value--},updateQuestionAnswers:(i,c,A)=>{e.value=e.value.map(y=>y.id===A?{id:A,isRight:c,text:i}:y)},submitQuestionAnswers:()=>{let i="";e.value.forEach(c=>{i+=c.text+"|"}),i=i.slice(0,-1),w.value.answers=i},resetQuestionCreation:()=>{w.value.answers="",w.value.rightAnswer="",w.value.text="",w.value.weight=0,e.value=[],g.value=0}}}const H=$({__name:"EnterText",props:{editFormData:{},isEditable:{type:Boolean}},emits:["addQuestion"],setup(w,{emit:g}){const e=w,f=g,{formData:t,resetQuestionCreation:n}=I();e.editFormData&&(t.value.text=e.editFormData.text,t.value.answers=e.editFormData.answers,t.value.weight=e.editFormData.weight,t.value.rightAnswer=e.editFormData.rightAnswer);const m=()=>{f("addQuestion",t.value),e.isEditable||n()};return(b,u)=>{const i=l("v-textarea"),c=l("v-col"),A=l("v-text-field"),y=l("v-btn"),k=l("v-row"),p=l("v-form");return _(),D(p,{onSubmit:S(m,["prevent"])},{default:o(()=>[s(k,{"no-gutters":""},{default:o(()=>[s(c,{cols:"12",class:"mb-4"},{default:o(()=>[s(i,{modelValue:r(t).text,"onUpdate:modelValue":u[0]||(u[0]=a=>r(t).text=a),variant:"outlined",label:"Введите текст вопроса"},null,8,["modelValue"])]),_:1}),s(c,{cols:"12",class:"mb-4"},{default:o(()=>[s(A,{modelValue:r(t).rightAnswer,"onUpdate:modelValue":u[1]||(u[1]=a=>r(t).rightAnswer=a),label:"Введите ответ на вопрос"},null,8,["modelValue"])]),_:1}),s(c,{cols:"12",class:"mb-4"},{default:o(()=>[s(A,{modelValue:r(t).weight,"onUpdate:modelValue":u[2]||(u[2]=a=>r(t).weight=a),label:"Количество баллов за правильный ответ",type:"number"},null,8,["modelValue"])]),_:1}),s(c,{cols:"12"},{default:o(()=>[s(y,{type:"submit",color:"green"},{default:o(()=>[N(T(b.isEditable?"Обновить вопрос":"Создать вопрос"),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),L=$({__name:"EnterSingle",props:{id:{},selectedId:{},text:{},isSelected:{type:Boolean}},emits:["updateAnswer","deleteAnswer"],setup(w,{emit:g}){const e=w,f=g,t=C(e.text||""),n=C(e.isSelected||!1),m=()=>{f("updateAnswer",t.value,n.value,e.id)};return q(()=>e.selectedId,()=>{e.selectedId===e.id?n.value=!0:n.value=!1}),(b,u)=>{const i=l("v-text-field"),c=l("v-col"),A=l("v-checkbox"),y=l("v-tooltip"),k=l("v-btn"),p=l("v-row");return _(),D(p,{align:"center","no-gutters":"",class:P(["mb-2 pa-2",n.value?"bg-grey-lighten-4":""])},{default:o(()=>[s(c,{cols:"10"},{default:o(()=>[s(i,{modelValue:t.value,"onUpdate:modelValue":[u[0]||(u[0]=a=>t.value=a),m],modelModifiers:{lazy:!0},variant:"underlined",label:"Текст ответа"},null,8,["modelValue"])]),_:1}),s(c,{class:"d-flex justify-center",cols:"1"},{default:o(()=>[s(y,{text:"Сделать правильным","content-class":"bg-green text-white",location:"bottom center"},{activator:o(({props:a})=>[s(A,G({modelValue:n.value,"onUpdate:modelValue":[u[1]||(u[1]=d=>n.value=d),m]},a,{color:"green"}),null,16,["modelValue"])]),_:1})]),_:1}),s(c,{class:"d-flex justify-center",cols:"1"},{default:o(()=>[s(k,{onClick:u[2]||(u[2]=a=>b.$emit("deleteAnswer",b.id)),icon:"mdi-trash-can",color:"red"})]),_:1})]),_:1},8,["class"])}}}),J={class:"d-flex justify-space-between align-center mb-4"},K={key:0},O=$({__name:"SingleAnswer",props:{editFormData:{},isEditable:{type:Boolean}},emits:["addQuestion"],setup(w,{emit:g}){const e=w,f=g,{formData:t,currentAnswers:n,selectedAnswerId:m,currentAnswerNumber:b,addAnswer:u,deleteAnswer:i,updateQuestionAnswers:c,submitQuestionAnswers:A,resetQuestionCreation:y}=I();if(e.editFormData){t.value.text=e.editFormData.text,t.value.answers=e.editFormData.answers,t.value.weight=e.editFormData.weight,t.value.rightAnswer=e.editFormData.rightAnswer;const d=e.editFormData.answers.split("|"),v=e.editFormData.rightAnswer;b.value=d.length,d.forEach((x,h)=>{n.value.push({id:h+1,text:x,isRight:x===v})})}const k=(d,v,x)=>{v?(n.value=n.value.map(h=>(h.isRight=!1,h)),m.value=x,t.value.rightAnswer=d):x===m.value&&(m.value=0),c(d,v,x)},p=d=>{(m.value=d)&&(m.value=0),i(d)},a=()=>{n.value.some(d=>d.isRight)&&(A(),f("addQuestion",t.value),e.isEditable||y())};return(d,v)=>{const x=l("v-textarea"),h=l("v-col"),B=l("v-btn"),R=l("v-text-field"),V=l("v-row"),M=l("v-form");return _(),D(M,{onSubmit:S(a,["prevent"])},{default:o(()=>[s(V,{"no-gutters":""},{default:o(()=>[s(h,{cols:"12",class:"mb-4"},{default:o(()=>[s(x,{modelValue:r(t).text,"onUpdate:modelValue":v[0]||(v[0]=Q=>r(t).text=Q),variant:"outlined",label:"Введите текст вопроса","hide-details":""},null,8,["modelValue"])]),_:1}),s(h,{cols:"12",class:"mb-4"},{default:o(()=>[U("div",J,[v[2]||(v[2]=U("h4",{class:"mb-2 text-h6 pr-2"},"Добавьте ответы и выберете один правильный",-1)),s(B,{icon:"mdi-plus",color:"green",onClick:r(u)},null,8,["onClick"])]),r(b)?(_(),F("div",K,[(_(!0),F(j,null,z(r(n),Q=>(_(),D(L,{key:Q.id,id:Q.id,text:Q.text,"selected-id":r(m),"is-selected":Q.isRight,onUpdateAnswer:k,onDeleteAnswer:p},null,8,["id","text","selected-id","is-selected"]))),128))])):E("",!0)]),_:1}),s(h,{cols:"12",class:"mb-4"},{default:o(()=>[s(R,{modelValue:r(t).weight,"onUpdate:modelValue":v[1]||(v[1]=Q=>r(t).weight=Q),label:"Количество баллов за правильный ответ",type:"number"},null,8,["modelValue"])]),_:1}),s(h,{cols:"12"},{default:o(()=>[s(B,{type:"submit",color:"green"},{default:o(()=>[N(T(d.isEditable?"Обновить вопрос":"Создать вопрос"),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),W={class:"d-flex justify-space-between align-center mb-4"},X={key:0},Y=$({__name:"MultiplyAnswer",props:{editFormData:{},isEditable:{type:Boolean}},emits:["addQuestion"],setup(w,{emit:g}){const e=w,f=g,{formData:t,currentAnswers:n,selectedAnswerId:m,currentAnswerNumber:b,addAnswer:u,deleteAnswer:i,updateQuestionAnswers:c,submitQuestionAnswers:A,resetQuestionCreation:y}=I();if(e.editFormData){t.value.text=e.editFormData.text,t.value.answers=e.editFormData.answers,t.value.weight=e.editFormData.weight,t.value.rightAnswer=e.editFormData.rightAnswer;const p=e.editFormData.answers.split("|"),a=e.editFormData.rightAnswer.split("|");b.value=p.length,p.forEach((d,v)=>{n.value.push({id:v+1,text:d,isRight:a.includes(d)})})}const k=()=>{if(!n.value.some(a=>a.isRight))return;A();let p="";n.value.forEach(a=>a.isRight?p+=a.text+"|":p=p),p=p.slice(0,-1),t.value.rightAnswer=p,f("addQuestion",t.value),e.isEditable||y()};return(p,a)=>{const d=l("v-textarea"),v=l("v-col"),x=l("v-btn"),h=l("v-text-field"),B=l("v-row"),R=l("v-form");return _(),D(R,{onSubmit:S(k,["prevent"])},{default:o(()=>[s(B,{"no-gutters":""},{default:o(()=>[s(v,{cols:"12",class:"mb-4"},{default:o(()=>[s(d,{modelValue:r(t).text,"onUpdate:modelValue":a[0]||(a[0]=V=>r(t).text=V),variant:"outlined",label:"Введите текст вопроса","hide-details":""},null,8,["modelValue"])]),_:1}),s(v,{cols:"12",class:"mb-4"},{default:o(()=>[U("div",W,[a[2]||(a[2]=U("h4",{class:"mb-2 text-h6 pr-2"},"Добавьте ответы и выберете правильные",-1)),s(x,{icon:"mdi-plus",color:"green",onClick:r(u)},null,8,["onClick"])]),r(b)?(_(),F("div",X,[(_(!0),F(j,null,z(r(n),V=>(_(),D(L,{key:V.id,id:V.id,text:V.text,"selected-id":r(m),"is-selected":V.isRight,onUpdateAnswer:r(c),onDeleteAnswer:r(i)},null,8,["id","text","selected-id","is-selected","onUpdateAnswer","onDeleteAnswer"]))),128))])):E("",!0)]),_:1}),s(v,{cols:"12",class:"mb-4"},{default:o(()=>[s(h,{modelValue:r(t).weight,"onUpdate:modelValue":a[1]||(a[1]=V=>r(t).weight=V),label:"Количество баллов за правильный ответ",type:"number"},null,8,["modelValue"])]),_:1}),s(v,{cols:"12"},{default:o(()=>[s(x,{type:"submit",color:"green"},{default:o(()=>[N(T(p.isEditable?"Обновить вопрос":"Создать вопрос"),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),Z={key:0,elevation:"6",class:"pa-4"},ee={key:0,class:"d-flex justify-center"},te={key:1},ne=$({__name:"CreateQuestions",props:{isLoading:{type:Boolean},isTestNameEntered:{type:Boolean}},emits:["createQuestion","updateQustionType"],setup(w,{emit:g}){const e=g,f=C("text");return(t,n)=>{const m=l("v-radio"),b=l("v-radio-group"),u=l("v-progress-circular");return _(),F(j,null,[n[5]||(n[5]=U("h3",{class:"text-h6 mb-4"},"Выберете вид вопроса для добавления",-1)),s(b,{modelValue:f.value,"onUpdate:modelValue":[n[0]||(n[0]=i=>f.value=i),n[1]||(n[1]=i=>e("updateQustionType",f.value))],inline:"",class:"mb-5"},{default:o(()=>[s(m,{label:"Текстовый ввод ответа",value:"text"}),s(m,{label:"Несколько правильных ответов",value:"multiply"}),s(m,{label:"Один правильный ответ",value:"single"})]),_:1},8,["modelValue"]),t.isTestNameEntered?(_(),F("div",Z,[t.isLoading?(_(),F("div",ee,[s(u,{indeterminate:"",color:"red",size:"64"})])):(_(),F("div",te,[f.value=="text"?(_(),D(H,{key:0,"is-editable":!1,onAddQuestion:n[2]||(n[2]=i=>e("createQuestion",i))})):E("",!0),f.value=="single"?(_(),D(O,{key:1,"is-editable":!1,onAddQuestion:n[3]||(n[3]=i=>e("createQuestion",i))})):E("",!0),f.value==="multiply"?(_(),D(Y,{key:2,"is-editable":!1,onAddQuestion:n[4]||(n[4]=i=>e("createQuestion",i))})):E("",!0)]))])):E("",!0)],64)}}});export{ne as _,H as a,Y as b,O as c};
